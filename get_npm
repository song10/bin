#!/bin/sh

npmcmd=install
npmmod="\
 coffee-script\
 express\
 jade\
 stylus\
 everyauth
 cradle\
 node-gyp\
 html2jade\
 js2coffee\
 dot\
 nopt\
 markdown\
 clientjade\
 jslint\
 jquery\
 connect\
 dnode\
 underscore\
"

expr "$*" : '.* \?-f \?' > /dev/null && \
 rm -f `which npm`

expr "$*" : '.* \?debug \?' > /dev/null && \
 npmflags="$npmflags -ddd"

expr "$*" : '.* \?remove \?' > /dev/null && \
 npmcmd=remove && npmmod="$npmmod npm"

_=`which curl` \
	|| sudo apt-get install -y curl

_=`which npm` \
	|| curl http://npmjs.org/install.sh | npm_config_prefix=$HOME/opt sh

_npm () {
	echo
	echo "npm $npmcmd -g $npmflags $1"
	npm $npmcmd -g $npmflags $1
}

for x in $npmmod; do
	_npm $x
done
